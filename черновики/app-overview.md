# PickPock ‚Äî –≥–∞–π–¥ –ø–æ –ø—Ä–æ–¥—É–∫—Ç—É –∏ UX

–î–æ–∫—É–º–µ–Ω—Ç –¥–æ–ø–æ–ª–Ω—è–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –≥–ª–∞–∑–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –∫–∞–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞–π–ø–ª–∞–π–Ω —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π, –∫–∞–∫–∏–µ –µ—Å—Ç—å –ª–æ–≥–∏ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö, –∞ —Ç–∞–∫–∂–µ –Ω–∞ —á—Ç–æ –¥–µ–ª–∞–µ–º —É–ø–æ—Ä –≤ —é–∑–∞–±–∏–ª–∏—Ç–∏.

## 1. –¶–µ–Ω–Ω–æ—Å—Ç—å –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

- **–ö–∞—Ä–º–∞–Ω–Ω–∞—è –ø–∞–º—è—Ç—å**: PickPock —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–¥–µ–Ω—å–≥–∏, –º–µ—Å—Ç–∞, –≤–µ—â–∏, –ø–ª–∞–Ω—ã) –≤ –µ–¥–∏–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ `Action + Object + Context`.
- **–£–º–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫**: AI –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∞ —É—Å–∫–æ—Ä—è–µ—Ç –≤–≤–æ–¥ (—Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Ñ–æ—Ç–æ/—Ç–µ–∫—Å—Ç/URL, –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ñ–æ—Ä–º—É–ª—ã —Ä–∞—Å—Ö–æ–¥–æ–≤, –∏—â–µ—Ç –ø–æ —Å–º—ã—Å–ª—É).
- **–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ—Å–º–æ—Å –¥–∞–Ω–Ω—ã—Ö**: –≤—Å—ë —Ö—Ä–∞–Ω–∏—Ç—Å—è —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î ‚Äî PostgreSQL (JSONB, PostGIS, pgvector), –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ ‚Äî IndexedDB; –º–æ–∂–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å/—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞—Ç—å, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ—Ñ–ª–∞–π–Ω –∫–∞–∫ PWA –∏ –ø–∞–∫—É–µ—Ç—Å—è –≤ APK —á–µ—Ä–µ–∑ Capacitor.
- **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: —Ä–µ—Ü–µ–ø—Ç—ã –∏ –ø–æ–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã (—Å–º. `src/lib/config/recipes.ts`, `fields.ts`), –∫–æ–Ω—Ñ–∏–≥–∏ –∏ —Å—Ö–µ–º—ã –æ—Ç–¥–∞—ë—Ç FastAPI `/api/config/*`, –ø–æ—ç—Ç–æ–º—É –±–µ–∑ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å –Ω–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏; –≤ –ø–ª–∞–Ω–∞—Ö ‚Äî –¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª—è—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã –∏ –ø–æ–ª—è.

### 1.1 –§–∏–ª–æ—Å–æ—Ñ–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞

PickPock ‚Äî —Å–ø–æ–∫–æ–π–Ω–∞—è –≤–Ω–µ—à–Ω—è—è –ø–∞–º—è—Ç—å:

- –•—Ä–∞–Ω–∏—Ç **—Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è**, –∞ –Ω–µ —Ä–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–∫—Ç—ã (–±—ã–ª ‚Üí –µ–ª ‚Üí –ø–æ—Ç—Ä–∞—Ç–∏–ª).
- –ü–æ–∑–≤–æ–ª—è–µ—Ç ‚Äú–ø—Ä–æ—Å—Ç–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å‚Äù –±–µ–∑ –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏—è –≤ –∑–∞–¥–∞—á–∏; –ò–ò –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.
- –ü–æ–º–æ–≥–∞–µ—Ç —É–≤–∏–¥–µ—Ç—å, –∫—É–¥–∞ —É—Ö–æ–¥—è—Ç –≤—Ä–µ–º—è, –¥–µ–Ω—å–≥–∏ –∏ –≤–Ω–∏–º–∞–Ω–∏–µ, –Ω–µ –Ω–∞–≤—è–∑—ã–≤–∞—è –æ—Ç—á—ë—Ç–æ–≤ –∏ –¥–µ–¥–ª–∞–π–Ω–æ–≤.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ –≤–ª–∞–¥–µ–µ—Ç –¥–∞–Ω–Ω—ã–º–∏: –µ—Å—Ç—å —ç–∫—Å–ø–æ—Ä—Ç, –æ—Ñ—Ñ–ª–∞–π–Ω, –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π AI.

## 2. –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ —è–¥—Ä–æ, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –ø–æ–ª—è

### 2.1 Canonical formula

–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ —è–¥—Ä–æ:

- `Entry = Action + Object + Context`.
- Actions (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–∞–±–æ—Ä MVP): `noted`, `visited`, `planned`, `spent`, `received`, `lent`, `borrowed`, `returned`, `bought`, `gave`, `took`.
- Objects: `money`, `place`, `food`, `item`, `service`, `wish`, `task`, `note`.
- –ö–æ–≥–¥–∞ AI/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —É–≤–µ—Ä–µ–Ω ‚Äî fallback `noted + note`, –∫–æ–Ω—Ç–µ–∫—Å—Ç –º–æ–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å –ø–æ–∑–∂–µ.

### 2.2 –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ 8-—è ‚Äú–û–ø—ã—Ç‚Äù

–ö–∞—Ç–µ–≥–æ—Ä–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–µ–π—á–∞—Å (–±–∞–∑–æ–≤—ã–µ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–±—ä–µ–∫—Ç–∞–º —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ —è–¥—Ä–∞):

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è    | –û–ø–∏—Å–∞–Ω–∏–µ                                                        | –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö                                                |
| ------------ | --------------------------------------------------------------- | -------------------------------------------------------------- |
| `money`      | –í—Å–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è (—Ä–∞—Å—Ö–æ–¥—ã, –¥–æ—Ö–æ–¥—ã, –¥–æ–ª–≥–∏, –≤–æ–∑–≤—Ä–∞—Ç—ã).      | `spent/received/lent/borrowed + money`.                        |
| `items`      | –ü–æ–∫—É–ø–∫–∏, –ø–æ–¥–∞—Ä–∫–∏, –∑–∞–π–º—ã –≤–µ—â–∞–º–∏, –∫–æ–ª–ª–µ–∫—Ü–∏–∏.                      | `bought/gave/took/noted + item`.                               |
| `places`     | –ü–æ—Å–µ—â–µ–Ω–∏—è, –ø–ª–∞–Ω—ã –∏ –∑–∞–º–µ—Ç–∫–∏ –æ –º–µ—Å—Ç–∞—Ö.                            | `visited/planned/noted + place`.                               |
| `food`       | –ë–ª—é–¥–∞, –≥–∞—Å—Ç—Ä–æ-–≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è, —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã.                           | `noted + food`.                                                |
| `services`   | –£—Å–ª—É–≥–∏, –ø–æ–¥–ø–∏—Å–∫–∏, —Ä–µ–º–æ–Ω—Ç—ã, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏.                        | `spent/noted + service`.                                       |
| `wishes`     | –ñ–µ–ª–∞–Ω–∏—è, –∑–∞–¥–∞—á–∏, –Ω–∞–º–µ—Ä–µ–Ω–∏—è.                                     | `planned + wish/task`.                                         |
| `notes`      | –û–±—â–∏–µ —Å–æ–±—ã—Ç–∏—è –∏ fallback.                                       | `noted + note`.                                                |
| `experience` | 8-—è –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è (–ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è, –∏–Ω—Å–∞–π—Ç—ã, —Å–æ—Å—Ç–æ—è–Ω–∏—è). | `noted + note` —Å —Ç–µ–≥–∞–º–∏ `–æ–ø—ã—Ç/–≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ` –∏–ª–∏ intent `liked`. |

–ü–æ–º–∏–º–æ –±–∞–∑–æ–≤–æ–≥–æ –Ω–∞–±–æ—Ä–∞, –≤ `recipes.built.json` –∑–∞–≤–µ–¥–µ–Ω—ã —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≥—Ä—É–ø–ø—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

| –¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ                                       | –¢–∏–ø–∏—á–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã                                    |
| ---------------------- | ---------------------------------------------- | --------------------------------------------------- |
| `media`                | –§–∏–ª—å–º—ã, —Å–µ—Ä–∏–∞–ª—ã, –∫–Ω–∏–≥–∏, –º—É–∑—ã–∫–∞, –ø–æ–¥–∫–∞—Å—Ç—ã.      | `media_watched`, `media_read`, `media_listened`.    |
| `sport`                | –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏, –∑–∞–±–µ–≥–∏, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –ø—Ä–æ–≥—Ä–µ—Å—Å.      | `sport_training`, `sport_run`, `sport_progress`.    |
| `hobby`                | –ö–æ–ª–ª–µ–∫—Ü–∏–∏, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ, ‚Äú—Å–¥–µ–ª–∞–ª —Å–≤–æ–∏–º–∏ —Ä—É–∫–∞–º–∏‚Äù. | `hobby_collection`, `hobby_made`, `hobby_progress`. |

–≠—Ç–∏ —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–µ –∂–µ –æ–±—ä–µ–∫—Ç—ã (`note`, `item`, –∏–Ω–æ–≥–¥–∞ `service`), –Ω–æ –¥–∞—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–æ–ª–∫–∏ –¥–ª—è –º–µ–¥–∏–∞, —Å–ø–æ—Ä—Ç–∞ –∏ —Ö–æ–±–±–∏. –°–ø–∏—Å–æ–∫ –ø–æ–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ –º–µ—Ä–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–æ–≤.

- ‚Äú–û–ø—ã—Ç‚Äù —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø—Ä–∞–≤–∏–ª–æ–º `CATEGORY_RULES`: –µ—Å–ª–∏ –∑–∞–ø–∏—Å—å —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–≥–∏ ‚Äú–æ–ø—ã—Ç/–≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ/–ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏–µ‚Äù, –∫–∞—Ç–µ–≥–æ—Ä–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `experience`.
- –¢–∞–∫–æ–π –ø–∞—Ç—Ç–µ—Ä–Ω –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–µ (–¥–µ–Ω—å–≥–∏, –≤–µ—â–∏), —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ (–º–µ—Å—Ç–∞, –µ–¥–∞, —É—Å–ª—É–≥–∏), –º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ (–∂–µ–ª–∞–Ω–∏—è, –∑–∞–º–µ—Ç–∫–∏) –∏ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—ã–µ (–æ–ø—ã—Ç) –∞—Å–ø–µ–∫—Ç—ã –ø–∞–º—è—Ç–∏.

### 2.3 –ü–æ–ª—è –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç (–∞–∫—Ç—É–∞–ª—å–Ω—ã–π `src/lib/config/fields.ts`)

–ú—ã —É—à–ª–∏ –¥–∞–ª–µ–∫–æ –æ—Ç MVP: —Å–µ–π—á–∞—Å 50+ –ø–æ–ª–µ–π, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ —Å–µ–∫—Ü–∏—è–º `base`/`extended`. –ö–ª—é—á–µ–≤—ã–µ –±–ª–æ–∫–∏:

| –ì—Ä—É–ø–ø–∞                  | –ü—Ä–∏–º–µ—Ä—ã                                                                                               | –ì–¥–µ –≤–∏–¥–Ω–æ –≤ UI/–∫–æ–¥–µ                                                  |
| ----------------------- | ----------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------- |
| –ë–∞–∑–æ–≤—ã–µ                 | `title`, `date`, `amount`, `currency`, `category`, `tags`, `note`, `attachments`.                     | –õ—é–±–æ–π —Ä–µ—Ü–µ–ø—Ç (`RecipeEntryForm`).                                    |
| –õ—é–¥–∏ –∏ –º–µ—Å—Ç–∞            | `people[]`, `placeText`, `address`, `city`, `country`, `geo`.                                         | –í–∏–∑–∞—Ä–¥ —à–∞–≥ `form`, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã `entry/LocationFields.svelte`.         |
| –§–∏–Ω–∞–Ω—Å—ã/—Ç–æ—Ä–≥–æ–≤–ª—è        | `merchant`, `store`, `cardLast4`, `iban`, `account`, `invoice`, `billId`, `receiptNumber`, `orderId`. | Recipes money/service, API `entries/+server.ts` (serialize numbers). |
| –ö–æ–Ω—Ç–∞–∫—Ç—ã/–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã | `phone`, `email`, `website`, `table`, `seat`.                                                         | –ï–¥–∞/–º–µ—Å—Ç–∞ (–±—Ä–æ–Ω—å, —Ä–µ—Å—Ç–æ—Ä–∞–Ω).                                         |
| –ú–µ—Ç—Ä–∏–∫–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ     | `rating`, `quantity`, `unit`, `distance`, `calories`, `duration`, `mood`, `weather`, `temperature`.   | –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ food/experience, –≤–∏–¥–Ω—ã –≤ `FIELD_DEFS`.                     |
| –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ            | `startTime`, `endTime`, `time`, `recurrence`, `project`.                                              | –ü–ª–∞–Ω—ã/–∂–µ–ª–∞–Ω–∏—è, —Ä–µ–ø–æ `recipes`.                                       |
| –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ             | `jsonField`, `numberField`, `device`, `context`.                                                      | –î–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π.                                           |

AI –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ —Ç—É–¥–∞, –≥–¥–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω `aiKey`, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –æ—Å—Ç–∞—é—Ç—Å—è –ø–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## 3. –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (MVP1‚ÄìMVP3)

| –ë–ª–æ–∫               | –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç                                                               | –ì–¥–µ –≤ –∫–æ–¥–µ / –∑–∞–º–µ—Ç–∫–∏                                              |
| ------------------ | ------------------------------------------------------------------------------ | ----------------------------------------------------------------- |
| –ó–∞–ø–∏—Å–∏ (Entries)   | –°–æ–∑–¥–∞–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –≤–ª–æ–∂–µ–Ω–∏—è–º–∏, –ª—é–¥—å–º–∏, –º–µ—Å—Ç–∞–º–∏, —Ç–µ–≥–∞–º–∏.      | `src/routes/new`, `src/routes/entry/[id]`, FastAPI `/api/entries` (PostgreSQL). |
| –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö        | –í–∏–∑–∞—Ä–¥ `/new`: —Ç–µ–∫—Å—Ç, —Ñ–æ—Ç–æ, URL, –ø–æ–≤—Ç–æ—Ä –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏, –≥–æ–ª–æ—Å (Web Speech).        | `src/routes/new/+page.svelte`.                                    |
| AI-–∞–Ω–∞–ª–∏–∑          | `POST /api/ai/analyze`, `chat`, `search`, –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∏.     | FastAPI `/api/ai/*` (–ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç OpenRouter).                      |
| Dashboard          | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —Å–≤–æ–¥–∫–∞, –±—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è, –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏.                        | `src/routes/+page.svelte`, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã `lib/components/dashboard`. |
| –ü–æ–∏—Å–∫ –∏ —á–∞—Ç        | –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ + AI-—á–∞—Ç, —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, –ª—é–¥—è–º, –¥–∞—Ç–∞–º.             | `src/routes/search`, `EntryAIChat.svelte`.                        |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∏          | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞–º–∏, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è, –∫–æ–Ω—Ñ–∏–≥ AI –∫–ª—é—á–µ–π, —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö.         | `src/routes/settings`, FastAPI `/api/config/*`.                   |
| PWA/Capacitor      | Service worker, IndexedDB, background sync, Android-–ø–∞–∫–µ—Ç —á–µ—Ä–µ–∑ Capacitor.     | `src/service-worker.js`, `capacitor.config.ts`.                   |
| –§–∞–π–ª—ã –∏ –º–µ–¥–∏–∞      | –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ object storage —á–µ—Ä–µ–∑ FastAPI, –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ Sharp, –ª–∏–º–∏—Ç—ã.        | `/api/files/*`, –≤–æ—Ä–∫–µ—Ä Celery.                                     |
| –õ–æ–≥–∏/Observability | –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π `logger.ts`, —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏, raw AI –æ—Ç–≤–µ—Ç—ã, Flower –¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π. | `src/lib/utils/logger.ts`, FastAPI telemetry + Celery/Flower.     |

## 4. UX-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

| –≠–∫—Ä–∞–Ω/—Å–µ–≥–º–µ–Ω—Ç       | –û–ø–∏—Å–∞–Ω–∏–µ UX                                                                   | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã/—Ñ–∞–π–ª—ã                                            |
| ------------------- | ----------------------------------------------------------------------------- | ----------------------------------------------------------- |
| –ì–ª–∞–≤–Ω–∞—è (Dashboard) | –ê–≥—Ä–µ–≥–∞—Ç—ã –∑–∞ –ø–µ—Ä–∏–æ–¥, –∫–∞—Ä—Ç–æ—á–∫–∏ ‚Äú–ß—Ç–æ –Ω–æ–≤–æ–≥–æ?‚Äù, –±—ã—Å—Ç—Ä—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –∏ AI-–ø–æ–¥—Å–∫–∞–∑–∫–∏.   | `src/lib/components/dashboard/*`.                           |
| –õ–µ–Ω—Ç–∞ / Entries     | –°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏, –±—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å).    | `src/routes/entries/+page.svelte`.                          |
| –ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–ø–∏—Å–∏     | –î–µ—Ç–∞–ª–∏ —Å —Ç–∞–π–º–ª–∞–π–Ω–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π, –≤–ª–æ–∂–µ–Ω–∏—è–º–∏, —Å—Å—ã–ª–∫–æ–π –Ω–∞ —Ä–µ—Ü–µ–ø—Ç.                 | `src/routes/entry/[id]`.                                    |
| –í–∏–∑–∞—Ä–¥ `/new`       | –ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ã–π –≤–≤–æ–¥: source ‚Üí AI refine ‚Üí form ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ.              | `src/routes/new/+page.svelte`, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã `entry/*.svelte`. |
| –ü–æ–∏—Å–∫ / AI —á–∞—Ç      | –ü–æ–ª–µ –≤–≤–æ–¥–∞ + —Ñ–∏–ª—å—Ç—Ä—ã + —á–∞—Ç —Å –æ—Ç–≤–µ—Ç–∞–º–∏ –ø–æ —Å–º—ã—Å–ª—É, –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π. | `EntryAIChat.svelte`, `SearchInput.svelte`.                 |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∏/Recipes   | –¢–æ–≥–≥–ª—ã –±–∞–∑–æ–≤—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤, —Å–æ–∑–¥–∞–Ω–∏–µ user recipes, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ AI –∫–ª—é—á–∞–º–∏.        | `src/routes/settings`.                                      |
| –û–Ω–±–æ—Ä–¥–∏–Ω–≥           | –≠–∫—Ä–∞–Ω –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è —Å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–µ–π —Ü–µ–Ω–Ω–æ—Å—Ç–∏ (–∫–∞—Ä—É—Å–µ–ª—å).                        | `src/routes/onboarding/+page.svelte`.                       |

## 5. –ü–∞–π–ø–ª–∞–π–Ω—ã –∏ —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã

### 4.1 –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏

1. **–í—ã–±–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–∞** (`source` step): —Ç–µ–∫—Å—Ç / —Ñ–æ—Ç–æ / URL / –ø–æ–≤—Ç–æ—Ä / –∫–∞—Ç–µ–≥–æ—Ä–∏—è / –≥–æ–ª–æ—Å.
2. **AI-–∞–Ω–∞–ª–∏–∑** (`ai/analyze`): –∏–∑–≤–ª–µ–∫–∞–µ–º action/object, –ø–æ–ª—è (title, amount, place, tags), confidence.
3. **–£—Ç–æ—á–Ω–µ–Ω–∏–µ** (`refine`): –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ä–µ—Ü–µ–ø—Ç, –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ clarifying questions.
4. **–§–æ—Ä–º–∞** (`RecipeEntryForm`): –ø–æ–ª—è –ø–æ–¥ —Ä–µ—Ü–µ–ø—Ç—ã, –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ, –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö.
5. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: `POST /api/entries` (FastAPI ‚Üí PostgreSQL + object storage), –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ–¥–∏–∞ —á–µ—Ä–µ–∑ Sharp/Celery, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ aiRaw –∏ aiConfidence.
6. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –ª–æ–∫–∞–ª—å–Ω–æ –∫–ª–∞–¥—ë–º –≤ IndexedDB (optimistic UI), —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç ID + –≤–µ—Ä—Å–∏—é ‚Üí –æ–±–Ω–æ–≤–ª—è–µ–º store, —Ñ–æ–Ω–æ–≤—ã–µ sync-–æ—á–µ—Ä–µ–¥–∏ —á–µ—Ä–µ–∑ Celery/Redis.

### 4.2 –ü–æ–∏—Å–∫ –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç –∏–ª–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç —á–∞—Ç.
2. `ai/search` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `response` + `suggestedEntryIds` + `filters`.
3. UI –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –±—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–æ—Ç–∫—Ä—ã—Ç—å, –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å, –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É).
4. –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —Ñ–∏–ª—å—Ç—Ä—ã (–∫–∞—Ç–µ–≥–æ—Ä–∏—è, –¥–∞—Ç–∞, —Å—É–º–º–∞) –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∫–∞–∫ –≤–∏–¥–∂–µ—Ç.

### 4.3 –ö–∞—Ç–∞–ª–æ–≥ —Ä–µ—Ü–µ–ø—Ç–æ–≤

- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –ø–ª–∏—Ç–∫–∏ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ `recipes.built.json`.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ä–µ—Ü–µ–ø—Ç, –≤–∏–¥–∏—Ç –æ–ø–∏—Å–∞–Ω–∏–µ, –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø–∏—Ç–∞–Ω–∏—è/—Ñ–∏–Ω–∞–Ω—Å–æ–≤.
- –ü—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–∏–∏ —Ä–µ—Ü–µ–ø—Ç–∞ –æ–Ω —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞, –Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏.

### 4.4 –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø—Ä–æ—Ñ–∏–ª–∏

- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ AI –∫–ª—é—á–∞, –≤–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π.
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ —Ä–µ—Ü–µ–ø—Ç–∞–º–∏ (`user_recipes` + `recipe_settings`).
- –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV, –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö (—á–µ—Ä–µ–∑ scripts –∏–ª–∏ `/api/export`).

## 6. AI –∏ —É–º–Ω—ã–µ –ø–æ–º–æ—â–Ω–∏–∫–∏

### 6.1 –ö–∞–Ω–∞–ª—ã –≤–≤–æ–¥–∞

- üì∑ –§–æ—Ç–æ (—á–µ–∫–∏, –µ–¥–∞, –º–µ—Å—Ç–∞, –≤–µ—â–∏), üñº —Å–∫—Ä–∏–Ω—à–æ—Ç—ã (–±–∞–Ω–∫, –±—Ä–æ–Ω–∏).
- üîó URL (e-commerce, —Å–µ—Ä–≤–∏—Å—ã, –±—Ä–æ–Ω–∏) ‚Äî AI –≤—ã—Ç–∞—Å–∫–∏–≤–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ, —Ü–µ–Ω—É, –±—Ä–µ–Ω–¥, –∞–¥—Ä–µ—Å.
- üìù –¢–µ–∫—Å—Ç/–≥–æ–ª–æ—Å ‚Äî —Å–≤–æ–±–æ–¥–Ω—ã–π –≤–≤–æ–¥, –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ `planned/noted`.
- –°–º–µ—à–∞–Ω–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ (—Ñ–æ—Ç–æ + —Ç–µ–∫—Å—Ç).

### 6.2 –ó–∞–¥–∞—á–∏ AI

| –°—Ü–µ–Ω–∞—Ä–∏–π              | –ü–æ–≤–µ–¥–µ–Ω–∏–µ AI                                                                    | –¢–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏                     |
| --------------------- | ------------------------------------------------------------------------------- | ------------------------------------ |
| –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç `action + object`, —Å–æ–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç JSON —Å—Ç—Ä–æ–≥–æ –ø–æ —Å—Ö–µ–º–µ.           | `POST /api/ai/analyze`.              |
| –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π  | –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç `title`, `amount`, `currency`, `people`, `placeText`, `tags`.       | `lastAIResult` –≤ `/new`.             |
| –ú—É–ª—å—Ç–∏-–¥—Ä–∞—Ñ—Ç—ã         | –ú–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π (`multiple`) –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤.               | `multipleAIResults`.                 |
| –ß–∞—Ç/–ø–æ–∏—Å–∫             | –û—Ç–≤–µ—á–∞–µ—Ç ‚Äú–≤–æ –≤—Ç–æ—Ä–æ–º –ª–∏—Ü–µ‚Äù, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `response + suggestedEntryIds + filters`. | `ai/chat`, `ai/search`.              |
| –ü–æ–¥—Å–∫–∞–∑–∫–∏/Refine      | –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `clarifyingQuestions`, –∫–æ—Ç–æ—Ä—ã–º–∏ –º–æ–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å —Ç–∏–ø –∑–∞–ø–∏—Å–∏.           | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã `entry/AIClarifications`. |
| Preview & Confidence  | –í—Å–µ–≥–¥–∞ –æ—Ç–¥–∞—ë—Ç `confidence`, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø—Ä–µ–≤—å—é –∏ –º–æ–∂–µ—Ç –æ—Ç–∫–ª–æ–Ω–∏—Ç—å.        | UI `AIPreview`.                      |

### 6.3 –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- AI **–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç** –∑–∞–ø–∏—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –Ω–µ –º–µ–Ω—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ.
- –ï—Å–ª–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –Ω–∏–∑–∫–∞—è –∏–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ–ø–æ–ª–Ω—ã–µ ‚Üí fallback `noted + note`.
- Output —Å—Ç—Ä–æ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ö–µ–º–µ (`action`, `object`, `title`, `amount`, ‚Ä¶, `confidence`); —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ `entries.aiRaw`.
- –ó–∞–ø—Ä–µ—â–µ–Ω–æ –≤—ã–¥—É–º—ã–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è: –ª—É—á—à–µ `null`, —á–µ–º ‚Äú—É–≥–∞–¥–∞–ª‚Äù.
- Non-goals: –Ω–µ—Ç –∞–≤—Ç–æ-—Å–æ–≤–µ—Ç–æ–≤, —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ä–∞—Å—á—ë—Ç–æ–≤, –∑–∞–¥–∞—á —Å –¥–µ–¥–ª–∞–π–Ω–∞–º–∏ ‚Äî AI –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ –ø–∞–º—è—Ç—å.

### 6.4 –†–∞—Å—à–∏—Ä–µ–Ω–∏—è –Ω–∞ –±—É–¥—É—â–µ–µ

- –†–∞—Å—Å—ã–ª–∫–∏ ‚Äú—Ç—ã –±—ã–ª –∑–¥–µ—Å—å –≥–æ–¥ –Ω–∞–∑–∞–¥‚Äù, Q&A –ø–æ–≤–µ—Ä—Ö –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π, —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –º–µ–∂–¥—É —Å–æ–±–æ–π.

## 7. –õ–æ–≥–∏, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞

- **–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –ª–æ–≥–∏**: `src/lib/utils/logger.ts` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏—è (screen_view, recipe_used, ai_error) –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–π sink.
- **AI-raw**: –≤ PostgreSQL (`entries.ai_raw`, `ai_confidence`) –∏ ClickHouse –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å—ã—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –æ–±—É—á–µ–Ω–∏—è.
- **Telemetry**: `/api/ai/*`, `/api/entries` –ø–∏—à—É—Ç –º–µ—Ç—Ä–∏–∫–∏ (–≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞, —Ä–∞–∑–º–µ—Ä payload) –≤ `telemetry` –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã.
- **–°–µ—Ä–≤–∏—Å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏**: –µ—Å—Ç—å scripts (`scripts/test-api.js`, `test-create-entry.js`) –¥–ª—è smoke-—Ç–µ—Å—Ç–æ–≤, –∞ —Ç–∞–∫–∂–µ –ø–ª–∞–Ω–∏—Ä—É—é—Ç—Å—è —Å–µ—Ä–≤–∏—Å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã `/api/health`, `/api/status`.
- **Observability UX**: –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ –≤—ã–≤–æ–¥–∏–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä `sync_state`, —Å—Ç–∞—Ç—É—Å—ã –æ—á–µ—Ä–µ–¥–µ–π AI (—á–µ—Ä–µ–∑ Flower/WebSocket), andon-–∫–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ AI.

## 8. –Æ–∑–∞–±–∏–ª–∏—Ç–∏ –∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

- **–ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –æ—Ç–∫–ª–∏–∫**: optimistic UI + IndexedDB, –¥–∞–∂–µ –ø—Ä–∏ –æ—Ñ—Ñ–ª–∞–π–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç ‚Äú–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ‚Äù.
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏**: —Ä–µ—Ü–µ–ø—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∏–º–µ—Ä—ã (‚Äú–ó–∞–ø–æ–º–Ω–∏ —á–µ–∫‚Äù, ‚Äú–î–æ–±–∞–≤—å –∂–µ–ª–∞–Ω–∏–µ‚Äù), –∫–Ω–æ–ø–∫–∏ AI –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ–º–æ–≥–∞—é—Ç –±—ã—Å—Ç—Ä–æ —É—Ç–æ—á–Ω–∏—Ç—å –≤–≤–æ–¥.
- **–ú–∏–Ω–∏–º—É–º —à–∞–≥–æ–≤**: –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –∫–Ω–æ–ø–∫–∞ ‚Äú–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ —á–µ—Ä–Ω–æ–≤–∏–∫‚Äù; –≤–∏–∑–∞—Ä–¥ –º–æ–∂–Ω–æ —Å–∫–∏–ø–Ω—É—Ç—å –¥–æ —Ñ–æ—Ä–º—ã.
- **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**: –∫—Ä—É–ø–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã UI (—Å–º. `lib/components/ui`), –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã—Ö —à–æ—Ä—Ç–∫–∞—Ç–æ–≤ –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ (–ø–ª–∞–Ω).
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**: —á—ë—Ç–∫–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º, —á—Ç–æ —Ñ–æ—Ç–æ/—Ç–µ–∫—Å—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ OpenRouter, –¥–æ–±–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–µ—Ç–∏.

## 9. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

| –ü–µ—Ä—Å–æ–Ω–∞                   | –ò—Å—Ç–æ—Ä–∏—è                                                                                                       | –¶–µ–ª—å                     |
| ------------------------- | ------------------------------------------------------------------------------------------------------------- | ------------------------ |
| ‚Äú–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–æ–º–µ–Ω—Ç‚Äù        | –°—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞—Ç—å —á–µ–∫ –ø–æ—Å–ª–µ —É–∂–∏–Ω–∞, AI –ø—Ä–µ–¥–ª–æ–∂–∏—Ç ready-made –∑–∞–ø–∏—Å—å ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–∏—Ç –∑–∞–º–µ—Ç–∫—É –æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏. | –ñ—É—Ä–Ω–∞–ª —ç–º–æ—Ü–∏–π+—Ä–∞—Å—Ö–æ–¥–æ–≤.  |
| ‚Äú–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫‚Äù             | –í—Å—Ç–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ, AI —Å–æ–∑–¥–∞—Å—Ç –∑–∞–ø–∏—Å—å ‚Äúplanned + place‚Äù, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–¥–∞—ë—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ.         | –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—É–≥–∞.     |
| ‚Äú–û—Ö–æ—Ç–Ω–∏–∫ –∑–∞ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ–º‚Äù | –ó–∞–ø–∏—Å–∞—Ç—å –≥–æ–ª–æ—Å–æ–º –∏–¥–µ—é, AI —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Ç–µ–∫—Å—Ç, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–∞–∫ wish/task, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–º–µ—á–∞–µ—Ç —Ç–µ–≥–∏.              | –•—Ä–∞–Ω–µ–Ω–∏–µ –∏–¥–µ–π.           |
| ‚Äú–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å‚Äù           | –í —á–∞—Ç–µ —Å–ø—Ä–æ—Å–∏—Ç—å ‚Äú–ì–¥–µ —è –±—Ä–∞–ª –¥–µ–Ω—å–≥–∏ —É –ê–Ω–Ω—ã?‚Äù, –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ–ª–≥–æ–≤ –∏ –∫—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç.                          | –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ —Å–º—ã—Å–ª—É. |
| ‚Äú–ú–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–ª–ª–µ–∫—Ü–∏–π‚Äù      | –ß–µ—Ä–µ–∑ –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç —Ä–µ—Ü–µ–ø—Ç—ã, –≤–∫–ª—é—á–∞–µ—Ç ‚Äú–ö–æ–ª–ª–µ–∫—Ü–∏—è –≤–∏–Ω–∏–ª–∞‚Äù, –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã.                   | –£—á—ë—Ç –≤–µ—â–µ–π/–ø–æ–¥–∞—Ä–∫–æ–≤.     |

## 10. –ö–∞—Ç–∞–ª–æ–≥ —Ñ—É–Ω–∫—Ü–∏–π (—à–ø–∞—Ä–≥–∞–ª–∫–∞)

- **–†–µ—Ü–µ–ø—Ç—ã**: –∫–æ–Ω—Ñ–∏–≥ –≤ `src/lib/config/recipes.ts`, –±–∏–ª–¥—ã `recipes.built.json`, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ PostgreSQL (`recipes`, `recipe_settings`), –≤—ã–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ FastAPI `/api/recipes`.
- **–ü–æ–ª—è**: `src/lib/config/fields.ts`, —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è, —Å–µ–∫—Ü–∏–∏ —Ñ–æ—Ä–º—ã.
- **Entry types**: `src/lib/types/entry.ts` ‚Äî –ø–æ–ª–Ω–∞—è –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö.
- **–°–µ—Ä–≤–∏—Å—ã**: `src/lib/pocketbase/*` –¥–ª—è CRUD, `src/lib/data/pocketbase-client.ts` –¥–ª—è –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.
- **AI API**: `src/routes/api/ai/*` (analyze/chat/search), –ø—Ä–æ–∫—Å–∏—Ä—É—é—Ç OpenRouter.
- **File API**: `src/routes/api/files/entries/[id]/[filename]/+server.ts` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—Ç–¥–∞—á—É.
- **PWA**: `src/service-worker.js`, IndexedDB —Å–ª–æ–π —Ä–∞—Å–ø–∏—Å–∞–Ω –≤ —Ä–∞–∑–¥–µ–ª–µ –ø—Ä–æ PWA/Service Worker.

## 11. –ß—Ç–æ –¥–∞–ª—å—à–µ (highlights)

- –†–∞–∑–≤–∏–≤–∞—Ç—å `backend/` (FastAPI + Postgres) –¥–ª—è —Ç—è–∂—ë–ª—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤, —Å–æ—Ö—Ä–∞–Ω—è—è —Ñ—Ä–æ–Ω—Ç –≤ `frontend/`.
- –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –≤–æ—Ä–æ–Ω–æ–∫ (–æ–Ω–±–æ—Ä–¥–∏–Ω–≥ ‚Üí –ø–µ—Ä–≤–∞—è –∑–∞–ø–∏—Å—å ‚Üí –ø–æ–≤—Ç–æ—Ä).
- –£—Ç–æ—á–Ω–∏—Ç—å UX `EntryAIChat` (–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–æ–≤, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤).
- –†–∞—Å—à–∏—Ä–∏—Ç—å –∫–∞—Ç–∞–ª–æ–≥ —Ä–µ—Ü–µ–ø—Ç–æ–≤ —Å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ–ª—å–∑—ã (–º–∏–Ω–∏-—Å—Ç–æ—Ä–∏—Å –Ω–∞ –ø–ª–∏—Ç–∫–∞—Ö).

–î–æ–∫—É–º–µ–Ω—Ç –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–æ –º–µ—Ä–µ –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ–∏—á (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞—Ç√≠v–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏) –∏ –¥–µ—Ä–∂–∞—Ç—å –≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º, —á—Ç–æ–±—ã —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤–∞—è —á–∞—Å—Ç–∏ —Å–æ–≤–ø–∞–¥–∞–ª–∏.
