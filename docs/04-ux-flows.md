# 04 — UX‑потоки добавления записи

## Основной сценарий (New Entry Wizard)

### Шаг 1: Ввод

Пользователь быстро фиксирует событие:

- текстом
- фото (чек, документ, блюдо)
- ссылкой (товар, место)
- голосом
- QR‑кодом/штрихкодом

На этом шаге нет выбора категории и сложных форм.

### Шаг 2: Работа ИИ

ИИ:

- анализирует ввод
- распознаёт текст на фото
- классифицирует действие и объект
- предлагает рецепт
- заполняет поля
- если это чек/список, формирует список позиций (List) и итог

Если ИИ не уверен, переводит пользователя на выбор категории/рецепта.
В этом случае пользователь видит **минимальную форму** и может выбрать правильный сценарий вручную.

### Шаг 3: Подтверждение

Пользователь видит карточку‑черновик:

- проверяет поля
- редактирует и удаляет лишнее
- добавляет детали (эмоции, теги, фото)
- включает напоминание

**ИИ не сохраняет запись автоматически** — финальное решение всегда у пользователя.
Если ИИ ошибся, пользователь может **переопределить действие/объект** и получить другую структуру полей.

## Варианты входа

### Фото

Перед анализом пользователь выбирает **намерение** (покупка, перевод, документ и т.д.). Это повышает точность классификации и помогает выбрать правильный рецепт.

### URL

Похожий сценарий: намерение + короткое описание. ИИ использует ссылку и подсказки для заполнения карточки.

### QR/штрихкод

Сканирование кода как способ инициализации записи (товар, документ, сервис). ИИ может распознать тип кода и предложить релевантные поля или рецепт.

### Текст

Свободный текст без подсказок. При необходимости ИИ может задать уточняющие вопросы.
Например: «это расход или доход?» — чтобы уточнить действие.

## Обработка неопределенности

- Если ИИ не уверен в `action + object`, используется fallback `noted + note`.
- Пользователь может руками выбрать категорию и рецепт.

## UX‑принципы для визарда

- минимум шагов;
- визуальные подтверждения (skeleton/loader для AI);
- форма только на последнем шаге;
- прогрессивное раскрытие полей.

## Удобные варианты инициализации записи

- FAB/быстрый ввод (`/enter`);
- системный Share Sheet (поделиться ссылкой/фото/текстом в приложение);
- сканер QR/штрихкодов;
- быстрые шаблоны/рецепты (повторяющиеся сценарии);
- из списка (List) или напоминания (Reminder) — продолжить/добавить детали.
