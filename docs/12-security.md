# 12 — Безопасность и приватность

Документ описывает принципы защиты данных и практики хранения/обработки личной информации в PickPock.

## Принципы

- **Приватность по умолчанию.** Данные пользователя принадлежат пользователю.
- **Минимизация данных.** Храним только то, что необходимо для работы продукта.
- **Контроль у пользователя.** Экспорт, удаление и управление доступом — из настроек.
- **Прозрачность.** Пользователь знает, какие данные куда отправляются.
- **Сроки хранения.** Данные удаляются по запросу и не хранятся дольше необходимого.
- **Ответственность провайдера.** С внешними сервисами — договоры обработки данных и прозрачные условия.

## Данные и шифрование

- **Шифрование на устройстве.** Локальная база может храниться в зашифрованном виде.
- **Ключи пользователя.** Ключ шифрования — у пользователя; сервер не хранит ключи в открытом виде.
- **Импорт/экспорт.** Экспортируемая база шифруется и защищается паролем.
- **Резервные копии.** Бэкапы могут храниться в облаке пользователя (Google Drive / Яндекс.Диск) в зашифрованном виде.
- **Локальная база.** Основные записи и исходные запросы/ответы ИИ хранятся только на устройстве пользователя.
- **Минимум на сервере.** На сервере остаются только UUID пользователя/устройства и технические метаданные без содержимого записей.
- **Границы контуров.** Подробно разделение локального и облачного контуров описано в [18-storage-model.md](18-storage-model.md).

## Авторизация и безопасность доступа

- **QR‑авторизация.** Для входа на новое устройство можно использовать QR‑коды с одноразовой сессией.
- **Пара ключей.** При привязке устройства создаётся пара ключей; публичная часть используется для обмена, приватная — только на устройстве.
- **Сессии и устройства.** Пользователь видит список устройств и может отзывать доступ.

## Работа с ИИ и персональными данными

- **Внешние модели.** Распознавание фото/сканов может выполняться через внешние сервисы (например, Яндекс AI / Сбер Mega).
- **Проксирование запросов.** Чтобы защитить пользователя, запросы к ИИ идут через наш сервис, с минимальным набором данных.
- **Без хранения контента.** Запросы и ответы ИИ не сохраняются на сервере; фиксируются только UUID запроса, модель, дата и счётчики токенов.
- **Ответственность за данные.** Мы явно указываем, какие сервисы получают данные, и даём возможность отключить облачную обработку.
- **Выбор провайдера.** Пользователь видит, какой ИИ используется, и может выбрать альтернативный или локальный режим.
- **Размещение данных.** Для рынков с требованиями по локализации — используем провайдеров с хранением в нужной юрисдикции.
- **Согласие.** Перед отправкой чувствительных данных показываем явное согласие и объясняем риски.

## Управление персональными данными

- **Удаление и экспорт.** Полное удаление аккаунта и выгрузка данных доступны из настроек.
- **Журналы доступа.** Отдельный лог действий/доступов без содержания самих записей.
- **Инциденты.** План реагирования на утечки и уведомление пользователей.

## Совместные записи и шаринг

- **Гранулярные права.** Делимся отдельными карточками/списками, а не всей историей.
- **Группы.** В группе есть общий и приватный контуры, доступ настраивается по ролям.
- **Лог доступа.** Изменения и шаринг фиксируются, чтобы было видно, кто делал действие.
- **Сроки доступа.** Шаринг может быть ограничен по времени.
- **Удаление доступа.** Владелец записи всегда может отозвать доступ.

## Риски и меры

- **Утечка через облака.** Минимизируем отправляемые данные и даём возможность оффлайн‑режима.
- **Компрометация устройства.** Локальная база защищается паролем/биометрией устройства.
- **Ошибки ИИ.** Пользователь подтверждает итоговую карточку, ошибки исправляются вручную.
